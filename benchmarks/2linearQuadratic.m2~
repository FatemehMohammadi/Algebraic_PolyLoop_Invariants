restart
K = QQ
R= K[ x_1 .. x_8]
f1= 10*x_1-8*x_2
f2 = 6*x_1-4*x_2
f7 = x_3+x_4*x_1+x_5*x_2+x_6*x_1*x_2+x_7*x_1^2+x_8*x_2^2
#f7 =3*x_1 -4*x_2
X_0 = ideal(f7)
X_0 = trim X_0 
X_1=sub(X_0, {x_1 =>f1,x_2 =>f2})+X_0
X_1= radical X_1
X_1 == X_0
i = 0;
while  X_i != X_(i+1)  do (
    i = i+1;
    print i;
    X_(i+1) = sub(X_i, {x_1 =>f1,x_2 =>f2}) + X_0 ;
    print 100;
)
print i
i = i+1
S = sub(X_i, {x_1 =>3 , x_2 => -2, x_3 => 1})
K = primaryDecomposition X_i
l = length K
P = {}
s = 0;
while s<l do(
    I = {radical K_s};
    P = join(P,I);
    s = s+1;
    print s;
    )
P
Q = {}
s =0;
while s < l do(
    j = 0; 
    i = 0;
    while j <l do(
	if  P_s + P_j == P_s then (
	    i = i+1;
	    );
	
	j = j+1;
	);
    if i ==1 then (
	Q = join(Q, {P_s});
	
	);
    s = s+1;
    )
Q
trim S






restart
K = QQ
R= K[y_1..y_14,  x_1..x_14]
f1= 1+x_1+x_2+x_1*x_2-x_3
f2 = x_1
f3 = x_2
g1 = x_4
g2 = x_5
g3 = x_6
g4 = x_7
g5 = x_8
g6 = x_9
g7 = x_10
g8 = x_11
g9 = x_12
g10 = x_13
g11 = x_14
n = 11
k = 8
m = n-k
f7 = x_4+x_5*x_3^2+x_6*x_1^2+x_7*x_2^2+x_9*x_1*x_2+x_8*x_1*x_3+x_10*x_2*x_3+x_11*x_1+x_12*x_2+x_13*x_3+x_14*x_1*x_2*x_3
f8 = sub(f7 ,{ x_1 => y_1,x_2 => y_2, x_3 => y_3,x_4 => y_4,x_5 => y_5,x_6 => y_6,x_7 => y_7, x_8 => y_8, x_9 => y_9, x_10 => y_10, x_11 => y_11, x_12 => y_12, x_13 => y_13, x_14 => y_14})
X_0 = ideal(f7)
Y_0 = ideal(f8)
X_1 = ideal(y_1-f1, y_2-f2, y_3-f3,y_4 - g1, y_5 - g2, y_6 - g3, y_7-g4,y_8-g5,y_9-g6, y_10 -g7,y_11-g8, y_12-g9, y_13-g10,y_14-g11,  f7)
 j=0;
 while j < k do ( 
	print j;
	X_1 = sub(X_1, {x_(n - j) => y_(n-j)} );
	j = j+1;	
	);
    X_1= sub(X_1, {x_2 => y_3});
    X_1= sub(X_1, {x_3 => 1+y_2+y_3+y_2*y_3-y_1});
    X_1= sub(X_1, {x_1 => y_2});
    Y_1 = X_1;
X_1 = X_1 + ideal(f8)
X_1 = sub(X_1 ,{ y_1 => x_1,y_2 => x_2, y_3 => x_3,y_4 => x_4,y_5 => x_5,y_6 => x_6,y_7 => x_7, y_8 => x_8, y_9 => x_9, y_10 => x_10, y_11 => x_11, y_12=> x_12, y_13 => x_13, y_14 => x_14})
i = 0 
while  i < 8 do (
    i = i+1;
    print i;
    I_(i+1) =  ideal(y_1-f1, y_2-f2, y_3-f3,y_4 - g1, y_5 - g2, y_6 - g3, y_7-g4, y_8-g5, y_9-g6, y_10-g7, y_11 -g8, y_12-g9, y_13-g10, y_14-g11)+X_i+Y_0;
    X_(i+1) = I_(i+1);
    j = 0;
    while j < k do ( 
	print j;
	X_(i+1) = sub(X_(i+1), {x_(n - j) => y_(n-j)} );
	j = j+1;	
	);
    print 100;
    X_(i+1)= sub(X_(i+1), {x_2 => y_3});
    print 100;
    X_(i+1)= sub(X_(i+1), {x_3 => 1+y_2+y_3+y_2*y_3-y_1});
    print 100;
    X_(i+1)= sub(X_(i+1), {x_1 => y_2});
    Y_(i+1) = X_(i+1);
   X_(i+1) = sub(Y_(i+1) ,{ y_1 => x_1,y_2 => x_2, y_3 => x_3,y_4 => x_4,y_5 => x_5,y_6 => x_6,y_7 => x_7, y_8 => x_8, y_9 => x_9 , y_10 => x_10, y_11 => x_11, y_12 => x_12, y_13 => x_13, y_14=> x_14});
)
i = i+1
S = sub(X_i, {x_1 =>1 , x_2 => 3, x_3 => 7})
trim(S)
j = 0
Z_0 = X_i;
while j < i do (
    Z_(j+1) = sub(Z_j, {x_1 =>f1, x_2 =>f2, x_3=>f3}) + X_(i-(j+1)) ;
    print j;
    j= j+1;   
    )
S = sub(Z_i, {x_1 =>1 , x_2 => 3, x_3 => 7})

trim(S)
primaryDecomposition(S)
T = ideal(x_9, x_8, x_10,x_11, x_12, x_13, 2*x_4 - (x_1^2+x_2^2+x_3^2-2*x_1*x_2*x_3)*x_14, 2*x_5+x_14, 2*x_6+x_14, 2*x_7+x_14)
T+Z_i == T
L = ideal(x_9, x_8, x_10,x_11, x_12, x_13, x_4 + (x_1^2+x_2^2+x_3^2-2*x_1*x_2*x_3), x_5-1, x_6-1, x_7-1,x_14-2)
dim S
